<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module z_auth</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module z_auth</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Handle authentication of zotonic users.
<p>Copyright © 2009 Marc Worrell
  Date: 2009-04-24
 </p>

<p><b>Authors:</b> Marc Worrell (<a href="mailto:marc@worrell.nl"><tt>marc@worrell.nl</tt></a>).</p>

<h2><a name="description">Description</a></h2>Handle authentication of zotonic users.  Also shows the logon screen when authentication is required.
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#confirm-2">confirm/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#is_auth-1">is_auth/1</a></td><td>Check if the visitor has been authenticated.</td></tr>
<tr><td valign="top"><a href="#is_auth_recent-1">is_auth_recent/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#is_enabled-2">is_enabled/2</a></td><td>Check if the user is enabled, an user is enabled when the rsc is published and within its publication date range.</td></tr>
<tr><td valign="top"><a href="#logoff-1">logoff/1</a></td><td>Forget about the user being logged on.</td></tr>
<tr><td valign="top"><a href="#logon-2">logon/2</a></td><td>Logon an user whose id we know.</td></tr>
<tr><td valign="top"><a href="#logon_from_session-1">logon_from_session/1</a></td><td>Called after z_context:ensure_session.</td></tr>
<tr><td valign="top"><a href="#logon_pw-3">logon_pw/3</a></td><td>Logon a username/password combination, checks passwords with m_identity.</td></tr>
<tr><td valign="top"><a href="#user_from_page-1">user_from_page/1</a></td><td>Return the user_id from a page.</td></tr>
<tr><td valign="top"><a href="#user_from_session-1">user_from_session/1</a></td><td>Return the user_id from the session.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="confirm-2">confirm/2</a></h3>
<div class="spec">
<p><tt>confirm(UserId, Context) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="is_auth-1">is_auth/1</a></h3>
<div class="spec">
<p><tt>is_auth(Context::#context{}) -&gt; bool()</tt></p>
</div><p>Check if the visitor has been authenticated. Assumes a completely initalized context.</p>

<h3 class="function"><a name="is_auth_recent-1">is_auth_recent/1</a></h3>
<div class="spec">
<p><tt>is_auth_recent(Context) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="is_enabled-2">is_enabled/2</a></h3>
<div class="spec">
<p><tt>is_enabled(UserId, Context) -&gt; any()</tt></p>
</div><p>Check if the user is enabled, an user is enabled when the rsc is published and within its publication date range.</p>

<h3 class="function"><a name="logoff-1">logoff/1</a></h3>
<div class="spec">
<p><tt>logoff(Context) -&gt; NewContext</tt></p>
</div><p>Forget about the user being logged on.</p>

<h3 class="function"><a name="logon-2">logon/2</a></h3>
<div class="spec">
<p><tt>logon(UserId, Context) -&gt; any()</tt></p>
</div><p>Logon an user whose id we know</p>

<h3 class="function"><a name="logon_from_session-1">logon_from_session/1</a></h3>
<div class="spec">
<p><tt>logon_from_session(Context::#context{}) -&gt; #context{}</tt></p>
</div><p>Called after z_context:ensure_session.
  Check if the session contains an authenticated user id.
  When found then the user_id of the context is set.
  Also checks any automatic logon methods like "remember me" cookies.</p>

<h3 class="function"><a name="logon_pw-3">logon_pw/3</a></h3>
<div class="spec">
<p><tt>logon_pw(Username, Password, Context) -&gt; {bool(), NewContext}</tt></p>
</div><p>Logon a username/password combination, checks passwords with m_identity.</p>

<h3 class="function"><a name="user_from_page-1">user_from_page/1</a></h3>
<div class="spec">
<p><tt>user_from_page(PagePid) -&gt; any()</tt></p>
</div><p>Return the user_id from a page</p>

<h3 class="function"><a name="user_from_session-1">user_from_session/1</a></h3>
<div class="spec">
<p><tt>user_from_session(SessionPid) -&gt; any()</tt></p>
</div><p>Return the user_id from the session</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Sep 22 2011, 08:54:55.</i></p>
</body>
</html>
