<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module z_trans_server</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module z_trans_server</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Simple server to manage the translations, owns the ets table containing all translations.
<p>Copyright © 2010 Marc Worrell
  Date: 2010-05-18</p>

<p><b>Behaviours:</b> <a href="gen_server.html"><tt>gen_server</tt></a>.</p>
<p><b>Authors:</b> Marc Worrell (<a href="mailto:marc@worrell.nl"><tt>marc@worrell.nl</tt></a>).</p>

<h2><a name="description">Description</a></h2>Simple server to manage the translations, owns the ets table containing all translations.
  When new translations are read then the previous table is kept and the one before the previous is deleted.
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#code_change-3">code_change/3</a></td><td>Convert process state when code is changed.</td></tr>
<tr><td valign="top"><a href="#handle_call-3">handle_call/3</a></td><td>Return the id of the current translation table.</td></tr>
<tr><td valign="top"><a href="#handle_cast-2">handle_cast/2</a></td><td>Rebuild the translations table.</td></tr>
<tr><td valign="top"><a href="#handle_info-2">handle_info/2</a></td><td>Handling all non call/cast messages.</td></tr>
<tr><td valign="top"><a href="#init-1">init/1</a></td><td>Initiates the server.</td></tr>
<tr><td valign="top"><a href="#load_translations-1">load_translations/1</a></td><td>Parse all .po files and reload the found translations in the trans server.</td></tr>
<tr><td valign="top"><a href="#load_translations-2">load_translations/2</a></td><td>Take a proplist with dicts and reload the translations table.</td></tr>
<tr><td valign="top"><a href="#observe_module_ready-2">observe_module_ready/2</a></td><td>Reload the translations when modules are changed.</td></tr>
<tr><td valign="top"><a href="#set_context_table-1">set_context_table/1</a></td><td>Set the table id in the context to the newest table id.</td></tr>
<tr><td valign="top"><a href="#start_link-1">start_link/1</a></td><td>Starts the server.</td></tr>
<tr><td valign="top"><a href="#start_tests-0">start_tests/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#table-1">table/1</a></td><td>Return the name of the ets table holding all translations.</td></tr>
<tr><td valign="top"><a href="#terminate-2">terminate/2</a></td><td>This function is called by a gen_server when it is about to
  terminate.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="code_change-3">code_change/3</a></h3>
<div class="spec">
<p><tt>code_change(OldVsn, State, Extra) -&gt; {ok, NewState}</tt></p>
</div><p>Convert process state when code is changed</p>

<h3 class="function"><a name="handle_call-3">handle_call/3</a></h3>
<div class="spec">
<p><tt>handle_call(Message::Request, From, State) -&gt; {reply, Reply, State} | {reply, Reply, State, Timeout} | {noreply, State} | {noreply, State, Timeout} | {stop, Reason, Reply, State} | {stop, Reason, State}</tt></p>
</div><p>Return the id of the current translation table</p>

<h3 class="function"><a name="handle_cast-2">handle_cast/2</a></h3>
<div class="spec">
<p><tt>handle_cast(Message::Msg, State) -&gt; {noreply, State} | {noreply, State, Timeout} | {stop, Reason, State}</tt></p>
</div><p>Rebuild the translations table. Call the template flush routines afterwards.
  Trans is a dict with all translations per translatable string.</p>

<h3 class="function"><a name="handle_info-2">handle_info/2</a></h3>
<div class="spec">
<p><tt>handle_info(Info, State) -&gt; {noreply, State} | {noreply, State, Timeout} | {stop, Reason, State}</tt></p>
</div><p>Handling all non call/cast messages</p>

<h3 class="function"><a name="init-1">init/1</a></h3>
<div class="spec">
<p><tt>init(Host::Args) -&gt; {ok, State} | {ok, State, Timeout} | ignore | {stop, Reason}</tt></p>
</div><p>Initiates the server.</p>

<h3 class="function"><a name="load_translations-1">load_translations/1</a></h3>
<div class="spec">
<p><tt>load_translations(Context) -&gt; any()</tt></p>
</div><p>Parse all .po files and reload the found translations in the trans server</p>

<h3 class="function"><a name="load_translations-2">load_translations/2</a></h3>
<div class="spec">
<p><tt>load_translations(Trans, Context) -&gt; any()</tt></p>
</div><p>Take a proplist with dicts and reload the translations table.
  After reloading the the template server is flushed.</p>

<h3 class="function"><a name="observe_module_ready-2">observe_module_ready/2</a></h3>
<div class="spec">
<p><tt>observe_module_ready(X1, Context) -&gt; any()</tt></p>
</div><p>Reload the translations when modules are changed.</p>

<h3 class="function"><a name="set_context_table-1">set_context_table/1</a></h3>
<div class="spec">
<p><tt>set_context_table(Context) -&gt; any()</tt></p>
</div><p>Set the table id in the context to the newest table id</p>

<h3 class="function"><a name="start_link-1">start_link/1</a></h3>
<div class="spec">
<p><tt>start_link(SiteProps) -&gt; {ok, Pid} | ignore | {error, Error}</tt></p>
</div><p>Starts the server</p>

<h3 class="function"><a name="start_tests-0">start_tests/0</a></h3>
<div class="spec">
<p><tt>start_tests() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="table-1">table/1</a></h3>
<div class="spec">
<p><tt>table(Host) -&gt; any()</tt></p>
</div><p>Return the name of the ets table holding all translations</p>

<h3 class="function"><a name="terminate-2">terminate/2</a></h3>
<div class="spec">
<p><tt>terminate(Reason, State) -&gt; <a href="#type-void">void()</a></tt></p>
</div><p>This function is called by a gen_server when it is about to
  terminate. It should be the opposite of Module:init/1 and do any necessary
  cleaning up. When it returns, the gen_server terminates with Reason.
  The return value is ignored.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Aug 12 2011, 20:01:40.</i></p>
</body>
</html>
