<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module z_template</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module z_template</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Template handling, compiles and renders django compatible templates using an extended version of erlydtl.
<p>Copyright © 2009 Marc Worrell</p>

<p><b>Behaviours:</b> <a href="gen_server.html"><tt>gen_server</tt></a>.</p>
<p><b>Authors:</b> Marc Worrell (<a href="mailto:marc@worrell.nl"><tt>marc@worrell.nl</tt></a>).</p>

<h2><a name="description">Description</a></h2>Template handling, compiles and renders django compatible templates using an extended version of erlydtl
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#code_change-3">code_change/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#compile-2">compile/2</a></td><td>Compile a template, retun the module name.</td></tr>
<tr><td valign="top"><a href="#find_template-2">find_template/2</a></td><td>Finds the template designated by the file, check modules.</td></tr>
<tr><td valign="top"><a href="#find_template-3">find_template/3</a></td><td>Finds the first or all templates designated by the file, check modules.</td></tr>
<tr><td valign="top"><a href="#find_template_cat-3">find_template_cat/3</a></td><td>Finds the template designated by the file, for the category of the rsc with id, check modules.</td></tr>
<tr><td valign="top"><a href="#handle_call-3">handle_call/3</a></td><td>Compile the template if it has been modified, return the template module for rendering.</td></tr>
<tr><td valign="top"><a href="#handle_cast-2">handle_cast/2</a></td><td>Reset all compiled templates, done by the module_indexer after the module list changed.</td></tr>
<tr><td valign="top"><a href="#handle_info-2">handle_info/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#init-1">init/1</a></td><td>Initialize the template server, handles template compiles and rendering.</td></tr>
<tr><td valign="top"><a href="#is_template_module-1">is_template_module/1</a></td><td>Check if the module is a template module.</td></tr>
<tr><td valign="top"><a href="#render-2">render/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#render-3">render/3</a></td><td>Render a template.</td></tr>
<tr><td valign="top"><a href="#render_to_iolist-3">render_to_iolist/3</a></td><td>Render a template to an iolist().</td></tr>
<tr><td valign="top"><a href="#reset-1">reset/1</a></td><td>Force a reset of all templates, used after a module has been activated or deactivated.</td></tr>
<tr><td valign="top"><a href="#start_link-1">start_link/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#terminate-2">terminate/2</a></td><td></td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="code_change-3">code_change/3</a></h3>
<div class="spec">
<p><tt>code_change(OldVersion, State, Extra) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="compile-2">compile/2</a></h3>
<div class="spec">
<p><tt>compile(File, Context) -&gt; {ok, atom()} | {error, Reason}</tt></p>
</div><p>Compile a template, retun the module name.</p>

<h3 class="function"><a name="find_template-2">find_template/2</a></h3>
<div class="spec">
<p><tt>find_template(File, Context) -&gt; {ok, <a href="#type-filename">filename()</a>} | {error, code}</tt></p>
</div><p>Finds the template designated by the file, check modules.
  When the file is an absolute path, then do nothing and assume the file exists.</p>

<h3 class="function"><a name="find_template-3">find_template/3</a></h3>
<div class="spec">
<p><tt>find_template(File, X2::All, Context) -&gt; FilenameList</tt></p>
</div><p>Finds the first or all templates designated by the file, check modules.</p>

<h3 class="function"><a name="find_template_cat-3">find_template_cat/3</a></h3>
<div class="spec">
<p><tt>find_template_cat(File, Id, Context) -&gt; {ok, <a href="#type-filename">filename()</a>} | {error, code}</tt></p>
</div><p>Finds the template designated by the file, for the category of the rsc with id, check modules.
  When the file is an absolute path, then do nothing and assume the file exists.</p>

<h3 class="function"><a name="handle_call-3">handle_call/3</a></h3>
<div class="spec">
<p><tt>handle_call(X1::{check_modified, File}, From, State) -&gt; {ok, Module} | {error, Reason}</tt></p>
</div><p>Compile the template if it has been modified, return the template module for rendering.</p>

<h3 class="function"><a name="handle_cast-2">handle_cast/2</a></h3>
<div class="spec">
<p><tt>handle_cast(Msg, State) -&gt; any()</tt></p>
</div><p>Reset all compiled templates, done by the module_indexer after the module list changed.</p>

<h3 class="function"><a name="handle_info-2">handle_info/2</a></h3>
<div class="spec">
<p><tt>handle_info(Msg, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="init-1">init/1</a></h3>
<div class="spec">
<p><tt>init(SiteProps::Args) -&gt; {ok, State} | {ok, State, Timeout} | ignore | {stop, Reason}</tt></p>
</div><p>Initialize the template server, handles template compiles and rendering.</p>

<h3 class="function"><a name="is_template_module-1">is_template_module/1</a></h3>
<div class="spec">
<p><tt>is_template_module(Module::atom()) -&gt; bool()</tt></p>
</div><p>Check if the module is a template module.</p>

<h3 class="function"><a name="render-2">render/2</a></h3>
<div class="spec">
<p><tt>render(Render, Context) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="render-3">render/3</a></h3>
<div class="spec">
<p><tt>render(File, Variables, Context) -&gt; list()</tt></p>
</div><p>Render a template.  First requests the template module from the template server, then renders the template.
  The resulting list contains the rendered template and scomp contexts.  Use render_to_iolist/3 to get a iolist().</p>

<h3 class="function"><a name="render_to_iolist-3">render_to_iolist/3</a></h3>
<div class="spec">
<p><tt>render_to_iolist(File, Vars, Context) -&gt; {<a href="#type-iolist">iolist()</a>, Context}</tt></p>
</div><p>Render a template to an iolist().  This removes all scomp state etc from the rendered html and appends the
  information in the scomp states to the context for later rendering.</p>

<h3 class="function"><a name="reset-1">reset/1</a></h3>
<div class="spec">
<p><tt>reset(Host) -&gt; any()</tt></p>
</div><p>Force a reset of all templates, used after a module has been activated or deactivated.</p>

<h3 class="function"><a name="start_link-1">start_link/1</a></h3>
<div class="spec">
<p><tt>start_link(SiteProps) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="terminate-2">terminate/2</a></h3>
<div class="spec">
<p><tt>terminate(Reason, State) -&gt; any()</tt></p>
</div>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Aug 12 2011, 20:01:39.</i></p>
</body>
</html>
