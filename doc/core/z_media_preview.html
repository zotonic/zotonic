<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module z_media_preview</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module z_media_preview</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Make still previews of media, using image manipulation functions.
<p>Copyright © 2009 Marc Worrell
  Date: 2009-03-02</p>

<p><b>Authors:</b> Marc Worrell (<a href="mailto:marc@worrell.nl"><tt>marc@worrell.nl</tt></a>).</p>

<h2><a name="description">Description</a></h2>Make still previews of media, using image manipulation functions.  Resize, crop, gray, etc.
  This uses the command line imagemagick tools for all image manipulation.
  This code is adapted from PHP GD2 code, so the resize/crop could've been done more efficiently, but it works :-)
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#calc_size-7">calc_size/7</a></td><td>Calculate the size of the resulting image, depends on the crop and the original image size.</td></tr>
<tr><td valign="top"><a href="#can_generate_preview-1">can_generate_preview/1</a></td><td>Check if we can generate a preview image of the given mime type.</td></tr>
<tr><td valign="top"><a href="#cmd_args-3">cmd_args/3</a></td><td>Map filters to commandline options.</td></tr>
<tr><td valign="top"><a href="#convert-4">convert/4</a></td><td>Convert the Infile to an outfile with a still image using the filters.</td></tr>
<tr><td valign="top"><a href="#out_mime-2">out_mime/2</a></td><td>Return the preferred mime type of the image generated by resizing an image of a certain type and size.</td></tr>
<tr><td valign="top"><a href="#size-3">size/3</a></td><td>Calculate the size of the resulting image.</td></tr>
<tr><td valign="top"><a href="#string2filter-2">string2filter/2</a></td><td>Map the list of known filters and known args to atoms.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="calc_size-7">calc_size/7</a></h3>
<div class="spec">
<p><tt>calc_size(Width, Height, ImageWidth, ImageHeight, CropPar, Orientation, IsUpscale) -&gt; any()</tt></p>
</div><p>Calculate the size of the resulting image, depends on the crop and the original image size</p>

<h3 class="function"><a name="can_generate_preview-1">can_generate_preview/1</a></h3>
<div class="spec">
<p><tt>can_generate_preview(B::Mime) -&gt; true | false</tt></p>
</div><p>Check if we can generate a preview image of the given mime type</p>

<h3 class="function"><a name="cmd_args-3">cmd_args/3</a></h3>
<div class="spec">
<p><tt>cmd_args(FileProps, Filters, OutMime) -&gt; any()</tt></p>
</div><p>Map filters to commandline options</p>

<h3 class="function"><a name="convert-4">convert/4</a></h3>
<div class="spec">
<p><tt>convert(InFile, OutFile, Filters, Context) -&gt; ok | {error, Reason}</tt></p>
</div><p>Convert the Infile to an outfile with a still image using the filters.</p>

<h3 class="function"><a name="out_mime-2">out_mime/2</a></h3>
<div class="spec">
<p><tt>out_mime(Mime, Options) -&gt; {Mime, Extension}</tt></p>
</div><p>Return the preferred mime type of the image generated by resizing an image of a certain type and size.</p>

<h3 class="function"><a name="size-3">size/3</a></h3>
<div class="spec">
<p><tt>size(Props::MediaRef, Filters, Context) -&gt; {size, Width, Height, ResizedMime} | {error, Reason}</tt>
<ul class="definitions"><li><tt>MediaRef = Filename | MediaProps</tt></li>
</ul></p>
</div><p>Calculate the size of the resulting image.</p>

<h3 class="function"><a name="string2filter-2">string2filter/2</a></h3>
<div class="spec">
<p><tt>string2filter(X1::Filter, Where::Arg) -&gt; FilterTuple</tt></p>
</div><p>Map the list of known filters and known args to atoms.  Used when mapping preview urls back to filter args.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Aug 12 2011, 20:01:39.</i></p>
</body>
</html>
